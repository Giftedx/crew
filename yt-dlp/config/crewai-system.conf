# CrewAI yt-dlp configuration
# Paths are provided via environment variables:
#   CREWAI_DOWNLOADS_DIR - base downloads directory
#   CREWAI_YTDLP_ARCHIVE - path to archive file
#   CREWAI_TEMP_DIR - temporary processing directory

-o $CREWAI_DOWNLOADS_DIR/YouTube/%(uploader)s/%(upload_date>%Y)s/%(title)s [%(id)s].%(ext)s

# Quality optimization for Discord sharing
-f bestvideo[height<=1080][ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best
-S res:1080,fps:60,vcodec:h264,acodec:aac

# File organization and restrictions
--restrict-filenames
--trim-filenames 100
--windows-filenames

# Metadata extraction
--write-info-json
--write-thumbnail
--embed-metadata
--embed-subs
--embed-thumbnail

# Performance optimization with aria2c
--external-downloader aria2c
--external-downloader-args "-x 8 -j 3 -k 1M -s 8 --max-connection-per-server=16"
--concurrent-fragments 4
--retries 10

# Archive management
--download-archive $CREWAI_YTDLP_ARCHIVE

# Temp processing directory
-P temp:$CREWAI_TEMP_DIR
