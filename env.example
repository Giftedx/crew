# Ultimate Discord Intelligence Bot - Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# CORE SERVICES
# =============================================================================

# Discord Bot Configuration
DISCORD_BOT_TOKEN=your_discord_bot_token_here
DISCORD_PRIVATE_WEBHOOK=your_private_webhook_url_here
DISCORD_GUILD_ID=your_discord_guild_id_here
DISCORD_ANALYSIS_CHANNEL_ID=your_analysis_channel_id_here
DISCORD_ALERTS_CHANNEL_ID=your_alerts_channel_id_here
DISCORD_LOGS_CHANNEL_ID=your_logs_channel_id_here

# LLM Services Configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENROUTER_API_KEY=your_openrouter_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# LLM Provider Routing (new)
# Comma-separated provider allowlist used by the router. Examples:
#   openai,anthropic,google,openrouter,groq,together,cohere,mistral,fireworks,perplexity,xai,deepseek,azure_openai,bedrock
LLM_PROVIDER_ALLOWLIST=openai,anthropic,google,openrouter
# Router policy: quality_first | cost | latency
ROUTER_POLICY=quality_first
# Comma-separated high-level task names that should force quality-first policy
QUALITY_FIRST_TASKS=analysis,reasoning,coding

# Vector Database Configuration
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=your_qdrant_api_key_here
QDRANT_COLLECTION_NAME=ultimate_discord_intelligence
QDRANT_VECTOR_SIZE=1536

# =============================================================================
# FEATURE FLAGS - CORE FEATURES
# =============================================================================

# Core Analysis Features
ENABLE_DEBATE_ANALYSIS=true
ENABLE_FACT_CHECKING=true
ENABLE_MULTI_PLATFORM_MONITORING=true
ENABLE_CONTENT_ANALYSIS=true
ENABLE_CLAIM_EXTRACTION=true
ENABLE_VERIFICATION=true

# Advanced Features
ENABLE_UNIFIED_KNOWLEDGE=true
ENABLE_UNIFIED_METRICS=true
ENABLE_UNIFIED_ORCHESTRATION=true
ENABLE_UNIFIED_ROUTER=true
ENABLE_UNIFIED_CACHE=true
ENABLE_UNIFIED_MEMORY=true

# Quality Assurance Features
ENABLE_QUALITY_ASSURANCE=true
ENABLE_CONTENT_VALIDATION=true
ENABLE_CONSISTENCY_CHECKING=true
ENABLE_OUTPUT_VALIDATION=true
ENABLE_CONFIDENCE_SCORING=true

# Performance Optimization Features
ENABLE_PERFORMANCE_OPTIMIZATION=true
ENABLE_CACHE_OPTIMIZATION=true
ENABLE_MODEL_ROUTING=true
ENABLE_PROMPT_COMPRESSION=true
ENABLE_DSPY_OPTIMIZATION=true

# Advanced Memory Features
ENABLE_MEMORY_V2=true
ENABLE_CACHE_V2=true
ENABLE_KNOWLEDGE_OPS=true
ENABLE_MEM0_INTEGRATION=true

# Enhanced MCP Features
ENABLE_FAST_MCP_CLIENT=true
ENABLE_MCP_RESOURCE_MANAGEMENT=true

# Content Production Features
ENABLE_SMART_CLIP_COMPOSITION=true
ENABLE_NARRATIVE_TRACKING=true
ENABLE_CONTENT_GENERATION=true

# Enhanced Social Media Features
ENABLE_INSTAGRAM_STORIES_ARCHIVING=true
ENABLE_TIKTOK_ENHANCED_DOWNLOAD=true
ENABLE_TWITTER_THREAD_RECONSTRUCTION=true
ENABLE_CROSS_PLATFORM_NARRATIVE_TRACKING=true

# Reinforcement Learning Features
ENABLE_VOWPAL_WABBIT_BANDITS=true
ENABLE_RL_OPTIMIZATION=true
ENABLE_RL_MODEL_ROUTING=false

# Reward shaping for model routing
# Weight contribution of quality score in reward (0.0-1.0). If >0, response quality influences RL feedback.
REWARD_QUALITY_WEIGHT=0.0

# Compliance Features
ENABLE_SPONSOR_COMPLIANCE=true
ENABLE_POLICY_ENFORCEMENT=true
ENABLE_REGULATORY_COMPLIANCE=true

# =============================================================================
# CREWAI CONFIGURATION
# =============================================================================

# CrewAI Core Settings
CREW_MAX_RPM=10
CREW_EMBEDDER_PROVIDER=openai
CREW_EMBEDDER_CONFIG_JSON={}
CREW_PLANNING=true
CREW_MEMORY=true
CREW_CACHE=true
CREW_VERBOSE=true

# Agent Configuration
AGENT_MAX_ITERATIONS=10
AGENT_TIMEOUT=300
AGENT_MEMORY_ENABLED=true
AGENT_PLANNING_ENABLED=true

# Task Configuration
TASK_MAX_RETRIES=3
TASK_TIMEOUT=600
TASK_ASYNC_ENABLED=true

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================

# Cache Configuration
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
CACHE_CLEANUP_INTERVAL=300
CACHE_COMPRESSION_ENABLED=true
CACHE_PERSISTENCE_ENABLED=true

# Memory Configuration
MEMORY_MAX_SIZE=5000
MEMORY_CLEANUP_INTERVAL=600
MEMORY_COMPACTION_ENABLED=true
MEMORY_PERSISTENCE_ENABLED=true

# Processing Configuration
MAX_CONCURRENT_TASKS=10
TASK_BATCH_SIZE=5
PROCESSING_TIMEOUT=300
RETRY_ATTEMPTS=3
RETRY_DELAY=5

# =============================================================================
# RATE LIMITING
# =============================================================================

# General Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10
RATE_LIMIT_WINDOW_SIZE=60

# API Rate Limiting
OPENAI_RATE_LIMIT=1000
ANTHROPIC_RATE_LIMIT=100
DISCORD_RATE_LIMIT=50

# Platform Rate Limiting
YOUTUBE_RATE_LIMIT=100
TWITTER_RATE_LIMIT=300
TIKTOK_RATE_LIMIT=200
REDDIT_RATE_LIMIT=60

# =============================================================================
# OBSERVABILITY & MONITORING
# =============================================================================

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=/var/log/ultimate-discord-intelligence-bot.log
LOG_ROTATION_ENABLED=true
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Metrics Configuration
METRICS_ENABLED=true
METRICS_ENDPOINT=http://localhost:9090/metrics
METRICS_INTERVAL=30
METRICS_RETENTION=7d

# Tracing Configuration
TRACING_ENABLED=true
TRACING_ENDPOINT=http://localhost:14268/api/traces
TRACING_SAMPLING_RATE=0.1
TRACING_SERVICE_NAME=ultimate-discord-intelligence-bot

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_ENDPOINT=/health

# LangSmith Evaluation (optional)
ENABLE_LANGSMITH_EVAL=false
LANGSMITH_API_KEY=your_langsmith_api_key_here
LANGSMITH_PROJECT=discord-intel-evals
LANGSMITH_EVALUATION_DATASET=trajectory-accuracy
LANGSMITH_EVALUATION_NAME=trajectory-accuracy

# Deterministic Backstop (optional)
# If enabled, when self-evaluation fails or falls below threshold, the system will mark and perform a single deterministic backstop rerun
# using a curated top-tier model selected by the router override. All attempts are captured in metrics and metadata.
DETERMINISTIC_BACKSTOP_ENABLED=0
# Confidence threshold (0.0-1.0) below which a backstop may trigger even if eval "passed".
BACKSTOP_THRESHOLD=0.7
# Curated list of provider:model identifiers (first entry is used for the rerun).
BACKSTOP_CURATED_MODELS=anthropic:claude-3-5-sonnet,openai:gpt-4o,google:gemini-1.5-pro
# Optional: force the router to select a specific provider:model for all requests (debug/ops override)
# Example: FORCE_ROUTER_SELECTION=anthropic:claude-3-5-sonnet
FORCE_ROUTER_SELECTION=

# Trajectory Evaluation Pipeline (optional)
ENABLE_TRAJECTORY_EVALUATION=0
ENABLE_TRAJECTORY_FEEDBACK_LOOP=0
RL_FEEDBACK_BATCH_SIZE=25
RL_FEEDBACK_LOOP_INTERVAL_SECONDS=15
ENABLE_AGENT_EVALS=0
AGENTEVALS_MODEL=openai:o3-mini

# Self-evaluation (optional)
# If enabled, attach lightweight quality assessment to LLM responses and use for reward shaping when configured.
ENABLE_QUALITY_ASSESSMENT=1

# Langfuse Telemetry (optional)
ENABLE_LANGFUSE_EXPORT=false
LANGFUSE_PUBLIC_KEY=your_langfuse_public_key_here
LANGFUSE_SECRET_KEY=your_langfuse_secret_key_here
LANGFUSE_BASE_URL=https://cloud.langfuse.com

# AgentOps Instrumentation (optional)
ENABLE_AGENTOPS_EXPORT=false
AGENTOPS_API_KEY=your_agentops_api_key_here

# Vowpal Wabbit Router (optional)
ENABLE_VW_ROUTER=false
VW_MODEL_REPOSITORY=./vw-models

# LLMLingua Prompt Compression (optional)
ENABLE_LLMLINGUA=false
LLMLINGUA_MODEL=llmlingua-2-small
LLMLINGUA_TARGET_TOKENS=1500
LLMLINGUA_COMPRESSION_RATIO=0.6

# Letta Memory Integration (optional)
ENABLE_LETTA_MEMORY=false
LETTA_BASE_URL=https://api.letta.ai
LETTA_API_KEY=your_letta_api_key_here

# =============================================================================
# SECURITY & PRIVACY
# =============================================================================

# Authentication
AUTH_ENABLED=true
AUTH_TYPE=api_key
AUTH_API_KEY=your_secure_api_key_here
AUTH_JWT_SECRET=your_jwt_secret_here
AUTH_JWT_EXPIRY=3600

# Authorization
AUTHORIZATION_ENABLED=true
RBAC_ENABLED=true
PERMISSION_CACHE_TTL=300

# Encryption
ENCRYPTION_ENABLED=true
ENCRYPTION_ALGORITHM=AES-256-GCM
ENCRYPTION_KEY_ROTATION_INTERVAL=86400

# Privacy
PRIVACY_FILTERING_ENABLED=true
PII_DETECTION_ENABLED=true
DATA_RETENTION_DAYS=30
ANONYMIZATION_ENABLED=true

# =============================================================================
# MULTI-TENANCY
# =============================================================================

# Tenant Configuration
MULTI_TENANT_ENABLED=true
DEFAULT_TENANT=default
TENANT_ISOLATION_ENABLED=true
TENANT_RESOURCE_LIMITS=true

# Workspace Configuration
WORKSPACE_ISOLATION_ENABLED=true
MAX_WORKSPACES_PER_TENANT=10
WORKSPACE_RESOURCE_LIMITS=true

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# Browserbase Integration
BROWSERBASE_API_KEY=your_browserbase_api_key_here
BROWSERBASE_PROJECT_ID=your_browserbase_project_id_here
BROWSERBASE_ENABLED=true

# Hugging Face Integration
HUGGINGFACE_API_KEY=your_huggingface_api_key_here
HUGGINGFACE_ENABLED=true

# Neon Database Integration
NEON_API_KEY=your_neon_api_key_here
NEON_ENABLED=true

# LaunchDarkly Integration
LAUNCHDARKLY_ACCESS_TOKEN=your_launchdarkly_access_token_here
LAUNCHDARKLY_ENABLED=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=ultimate_discord_intelligence
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_postgres_password_here
POSTGRES_SSL_MODE=prefer
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=20

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password_here
REDIS_SSL_ENABLED=false
REDIS_POOL_SIZE=10

# Neo4j Graph Database Configuration
NEO4J_URI=bolt://localhost:7687
NEO4J_PASSWORD=defaultpassword
NEO4J_USER=neo4j

# Grafana Dashboard Configuration
GRAFANA_PASSWORD=admin

# =============================================================================
# CONTENT PROCESSING
# =============================================================================

# Content Quality Thresholds
MIN_CONTENT_QUALITY=0.6
MIN_CONFIDENCE_THRESHOLD=0.7
MIN_ACCURACY_THRESHOLD=0.8
MAX_PROCESSING_TIME=3600

# Content Size Limits
MAX_CONTENT_SIZE=100MB
MAX_VIDEO_DURATION=14400
MAX_AUDIO_DURATION=7200
MAX_TEXT_LENGTH=50000

# Content Type Configuration
SUPPORTED_VIDEO_FORMATS=mp4,avi,mov,webm
SUPPORTED_AUDIO_FORMATS=mp3,wav,flac,aac
SUPPORTED_IMAGE_FORMATS=jpg,jpeg,png,gif,webp
SUPPORTED_TEXT_FORMATS=txt,md,html,json

# =============================================================================
# PLATFORM-SPECIFIC SETTINGS
# =============================================================================

# YouTube Configuration
YOUTUBE_API_KEY=your_youtube_api_key_here
YOUTUBE_CLIENT_ID=your_youtube_client_id_here
YOUTUBE_CLIENT_SECRET=your_youtube_client_secret_here
YOUTUBE_MAX_RESOLUTION=1080
YOUTUBE_DOWNLOAD_FORMAT=best

# TikTok Configuration
TIKTOK_ENABLED=true
TIKTOK_MAX_RESOLUTION=720
TIKTOK_DOWNLOAD_FORMAT=mp4

# Twitter Configuration
TWITTER_API_KEY=your_twitter_api_key_here
TWITTER_API_SECRET=your_twitter_api_secret_here
TWITTER_ACCESS_TOKEN=your_twitter_access_token_here
TWITTER_ACCESS_TOKEN_SECRET=your_twitter_access_token_secret_here

# Reddit Configuration
REDDIT_CLIENT_ID=your_reddit_client_id_here
REDDIT_CLIENT_SECRET=your_reddit_client_secret_here
REDDIT_USER_AGENT=UltimateDiscordIntelligenceBot/1.0

# Instagram Configuration
INSTAGRAM_ENABLED=true
INSTAGRAM_MAX_RESOLUTION=1080

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Environment
ENVIRONMENT=development
DEBUG=false
TESTING=false

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker

# Docker Configuration
DOCKER_ENABLED=true
DOCKER_NETWORK=ultimate-discord-intelligence-network
DOCKER_VOLUME_PREFIX=ultimate-discord-intelligence

# Kubernetes Configuration
K8S_ENABLED=false
K8S_NAMESPACE=ultimate-discord-intelligence
K8S_REPLICAS=3

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/ultimate-discord-intelligence

# Recovery Configuration
RECOVERY_ENABLED=true
RECOVERY_AUTO_RESTORE=true
RECOVERY_CHECKPOINT_INTERVAL=3600

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Development Settings
DEV_MODE=false
DEV_RELOAD=true
DEV_DEBUG_TOOLBAR=false

# Testing Configuration
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/test_db
TEST_REDIS_URL=redis://localhost:6379/1
TEST_QDRANT_URL=http://localhost:6334

# Mock Services
MOCK_EXTERNAL_APIS=false
MOCK_LLM_RESPONSES=false
MOCK_DISCORD_API=false

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Custom Model Configuration
CUSTOM_MODELS_ENABLED=false
CUSTOM_MODEL_PATH=/models
CUSTOM_MODEL_CONFIG={}

# Plugin Configuration
PLUGINS_ENABLED=true
PLUGIN_PATH=/plugins
PLUGIN_AUTO_LOAD=true

# Webhook Configuration
WEBHOOK_ENABLED=true
WEBHOOK_URL=your_webhook_url_here
WEBHOOK_SECRET=your_webhook_secret_here

# API Configuration
API_ENABLED=true
API_VERSION=v1
API_DOCS_ENABLED=true
API_RATE_LIMIT=1000

# =============================================================================
# LEGACY SUPPORT
# =============================================================================

# Legacy API Support
LEGACY_API_ENABLED=false
LEGACY_API_VERSION=v0
LEGACY_API_DEPRECATION_DATE=2024-12-31

# Migration Settings
MIGRATION_ENABLED=true
MIGRATION_AUTO_RUN=true
MIGRATION_BACKUP_ENABLED=true
