# Qdrant Collections Configuration for Multi-Agent RL Orchestration
# This file defines the vector collections used for caching, RAG, and memory

collections:
  # Request embeddings for cache lookup
  requests:
    vector_size: 1536  # OpenAI text-embedding-3-small dimension
    distance: Cosine
    on_disk_payload: true
    hnsw_config:
      m: 16
      ef_construct: 100
    optimizers_config:
      default_segment_number: 2
    replication_factor: 1
    write_consistency_factor: 1
    shard_number: 1
    sharding_method: "auto"
    on_disk: true
    timeout: 20
    init_from_collection: null
    quantization_config: null
    sparse_vectors: {}
    payload_schema: {}

  # Artifact embeddings for RAG enrichment
  artifacts:
    vector_size: 1536  # OpenAI text-embedding-3-small dimension
    distance: Cosine
    on_disk_payload: true
    hnsw_config:
      m: 16
      ef_construct: 100
    optimizers_config:
      default_segment_number: 2
    replication_factor: 1
    write_consistency_factor: 1
    shard_number: 1
    sharding_method: "auto"
    on_disk: true
    timeout: 20
    init_from_collection: null
    quantization_config: null
    sparse_vectors: {}
    payload_schema: {}

  # High-confidence cache results with TTL
  cache_hits:
    vector_size: 1536  # OpenAI text-embedding-3-small dimension
    distance: Cosine
    on_disk_payload: true
    hnsw_config:
      m: 16
      ef_construct: 100
    optimizers_config:
      default_segment_number: 2
    replication_factor: 1
    write_consistency_factor: 1
    shard_number: 1
    sharding_method: "auto"
    on_disk: true
    timeout: 20
    init_from_collection: null
    quantization_config: null
    sparse_vectors: {}
    payload_schema: {}

# Collection metadata and indexing
metadata:
  # Tenant-aware namespace isolation
  namespace_template: "{tenant}_{workspace}_{collection}"
  
  # TTL settings for cache collections
  cache_ttl_hours: 24
  
  # Indexing configuration
  indexing:
    # Batch size for embedding generation
    batch_size: 100
    
    # Similarity threshold for cache hits
    similarity_threshold: 0.85
    
    # Maximum results per query
    max_results: 50
    
    # Context window for RAG
    context_window: 5

# Performance tuning
performance:
  # Connection pool settings
  connection_pool_size: 10
  
  # Query timeout (seconds)
  query_timeout: 30
  
  # Batch processing settings
  batch_processing:
    max_batch_size: 1000
    batch_timeout: 60
    
  # Memory optimization
  memory:
    # Enable on-disk storage for large collections
    on_disk_storage: true
    
    # Compression for payload data
    payload_compression: true
